<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>10.1 Fetch and AJAX | MAD9014</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Cross-Platform Application Development">
    
    <link rel="preload" href="/F2022/assets/css/0.styles.50f415bc.css" as="style"><link rel="preload" href="/F2022/assets/js/app.42156b92.js" as="script"><link rel="preload" href="/F2022/assets/js/2.309c8f6c.js" as="script"><link rel="preload" href="/F2022/assets/js/23.cbd124fb.js" as="script"><link rel="preload" href="/F2022/assets/js/4.8f0492b2.js" as="script"><link rel="preload" href="/F2022/assets/js/6.42129677.js" as="script"><link rel="prefetch" href="/F2022/assets/js/10.6ed74506.js"><link rel="prefetch" href="/F2022/assets/js/11.e4e57652.js"><link rel="prefetch" href="/F2022/assets/js/12.4fd9334c.js"><link rel="prefetch" href="/F2022/assets/js/13.d60171d2.js"><link rel="prefetch" href="/F2022/assets/js/14.ef5f94d3.js"><link rel="prefetch" href="/F2022/assets/js/15.89cba5d1.js"><link rel="prefetch" href="/F2022/assets/js/16.07b0adef.js"><link rel="prefetch" href="/F2022/assets/js/17.274ce64a.js"><link rel="prefetch" href="/F2022/assets/js/18.83156930.js"><link rel="prefetch" href="/F2022/assets/js/19.dd8c0299.js"><link rel="prefetch" href="/F2022/assets/js/20.905940c5.js"><link rel="prefetch" href="/F2022/assets/js/21.0ecc185a.js"><link rel="prefetch" href="/F2022/assets/js/22.8c4f615d.js"><link rel="prefetch" href="/F2022/assets/js/24.f984b5df.js"><link rel="prefetch" href="/F2022/assets/js/25.cae0bd53.js"><link rel="prefetch" href="/F2022/assets/js/26.171c675d.js"><link rel="prefetch" href="/F2022/assets/js/27.b6b19a01.js"><link rel="prefetch" href="/F2022/assets/js/28.762bb28a.js"><link rel="prefetch" href="/F2022/assets/js/29.ba3d8131.js"><link rel="prefetch" href="/F2022/assets/js/3.0ff4921b.js"><link rel="prefetch" href="/F2022/assets/js/30.9f8ef05e.js"><link rel="prefetch" href="/F2022/assets/js/31.b43b0ef2.js"><link rel="prefetch" href="/F2022/assets/js/32.c63a796c.js"><link rel="prefetch" href="/F2022/assets/js/33.b7b22e5a.js"><link rel="prefetch" href="/F2022/assets/js/34.410d0f9e.js"><link rel="prefetch" href="/F2022/assets/js/35.b935e2dc.js"><link rel="prefetch" href="/F2022/assets/js/36.27336e61.js"><link rel="prefetch" href="/F2022/assets/js/37.62aa130b.js"><link rel="prefetch" href="/F2022/assets/js/38.3da4e238.js"><link rel="prefetch" href="/F2022/assets/js/39.ffcb03f3.js"><link rel="prefetch" href="/F2022/assets/js/40.b0afee99.js"><link rel="prefetch" href="/F2022/assets/js/41.eeb38dd7.js"><link rel="prefetch" href="/F2022/assets/js/42.2e322fc2.js"><link rel="prefetch" href="/F2022/assets/js/43.3d75d1e0.js"><link rel="prefetch" href="/F2022/assets/js/44.d343e4db.js"><link rel="prefetch" href="/F2022/assets/js/45.35ad5dce.js"><link rel="prefetch" href="/F2022/assets/js/46.17dcf00b.js"><link rel="prefetch" href="/F2022/assets/js/5.71716d92.js"><link rel="prefetch" href="/F2022/assets/js/7.ea52c00d.js"><link rel="prefetch" href="/F2022/assets/js/8.78988ea0.js"><link rel="prefetch" href="/F2022/assets/js/9.2c22e4b4.js">
    <link rel="stylesheet" href="/F2022/assets/css/0.styles.50f415bc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/F2022/" class="home-link router-link-active"><img src="/F2022/mad-d-logo-sm.png" alt="MAD9014" class="logo"> <span class="site-name can-hide">MAD9014</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/F2022/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/F2022/assignments/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/F2022/conventions/" class="nav-link">
  Conventions
</a></div><div class="nav-item"><a href="/F2022/resources/" class="nav-link">
  Resources
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/F2022/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/F2022/assignments/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/F2022/conventions/" class="nav-link">
  Conventions
</a></div><div class="nav-item"><a href="/F2022/resources/" class="nav-link">
  Resources
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Content Modules</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/F2022/modules/week1/intro/" class="sidebar-link">1.1: Introduction</a></li><li><a href="/F2022/modules/week2/functions/" class="sidebar-link">2.1: Functions and Scope</a></li><li><a href="/F2022/modules/week2/flow-strings/" class="sidebar-link">2.2: Truthiness, Control Flow and Strings</a></li><li><a href="/F2022/modules/week3/math-numbers/" class="sidebar-link">3.1: Math and Numbers</a></li><li><a href="/F2022/modules/week3/dates-loops/" class="sidebar-link">3.2: Dates and Loops</a></li><li><a href="/F2022/modules/week4/arrays/" class="sidebar-link">4.1: Arrays</a></li><li><a href="/F2022/modules/week4/objects/" class="sidebar-link">4.2: Objects</a></li><li><a href="/F2022/modules/week5/dom-1/" class="sidebar-link">5.1: Document Object Model</a></li><li><a href="/F2022/modules/week5/dom-2/" class="sidebar-link">5.2: Document Object Model</a></li><li><a href="/F2022/modules/week6/events/" class="sidebar-link">6.1: Handling Events</a></li><li><a href="/F2022/modules/week7/project-structure/" class="sidebar-link">7.1: Project Structure</a></li><li><a href="/F2022/modules/week7/code-structure/" class="sidebar-link">7.2: Code Structure</a></li><li><a href="/F2022/modules/reading/" class="sidebar-link">8: Reading Week</a></li><li><a href="/F2022/modules/week9/promises/" class="sidebar-link">9.1: Promises</a></li><li><a href="/F2022/modules/week9/async/" class="sidebar-link">9.2: Asynchronous Programming</a></li><li><a href="/F2022/modules/week10/ajax/" aria-current="page" class="active sidebar-link">10.1: AJAX and Fetch</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/F2022/modules/week10/ajax/#ajax" class="sidebar-link">AJAX</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/week10/ajax/#xmlhttprequest" class="sidebar-link">XMLHttpRequest</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/week10/ajax/#fetch" class="sidebar-link">Fetch</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/week10/ajax/#json" class="sidebar-link">JSON</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/week10/ajax/#xml" class="sidebar-link">XML</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/week10/ajax/#request-objects" class="sidebar-link">Request Objects</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/week10/ajax/#response-objects" class="sidebar-link">Response Objects</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/week10/ajax/#body-objects" class="sidebar-link">Body Objects</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/week10/ajax/#header-objects" class="sidebar-link">Header Objects</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/week10/ajax/#url-and-location-objects" class="sidebar-link">URL and Location Objects</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/week10/ajax/#formdata-objects" class="sidebar-link">FormData Objects</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/week10/ajax/#urlsearchparams" class="sidebar-link">URLSearchParams</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/week10/ajax/#usvstring" class="sidebar-link">USVString</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/week10/ajax/#fetch-all-together" class="sidebar-link">Fetch All Together</a></li><li class="sidebar-sub-header"><a href="/F2022/modules/week10/ajax/#what-to-do-this-week" class="sidebar-link">What to do this week</a></li></ul></li><li><a href="/F2022/modules/week10/fetch-apis/" class="sidebar-link">10.2: Fetch and APIs</a></li><li><a href="/F2022/modules/week11/fetch-data/" class="sidebar-link">11.1: Dynamic Data</a></li><li><a href="/F2022/modules/week11/security/" class="sidebar-link">11.2: Fetch Security</a></li><li><a href="/F2022/modules/week12/observers/" class="sidebar-link">12.1: Observers &amp; Classes</a></li><li><a href="/F2022/modules/week12/destructure/" class="sidebar-link">12.2: Destructuring, Spead, &amp; Enumeration</a></li><li><a href="/F2022/modules/week13/storage/" class="sidebar-link">13.1: HTML5 APIs</a></li><li><a href="/F2022/modules/week13/multi-page/" class="sidebar-link">13.2: Multi-Page, SPA, and JAMStack </a></li><li><a href="/F2022/modules/week14/project-1/" class="sidebar-link">14.1: Forms &amp; Page Transitions</a></li><li><a href="/F2022/modules/week14/project-2/" class="sidebar-link">14.2: Final Project</a></li><li><a href="/F2022/modules/week15/" class="sidebar-link">15.1: Final Project</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><header><div class="section-title green">
    Programming with APIs
  </div> <h1>10.1 Fetch and AJAX</h1></header> <h2 id="ajax"><a href="#ajax" class="header-anchor">#</a> AJAX</h2> <p><code>AJAX</code> stands for Asynchronous Javascript And Xml.</p> <p>In the late nineties, it was not possible to download new data and apply that to the current webpage. If you wanted
updated results you had to refresh the whole page.</p> <div title="what is ajax" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/7EKebb4VUYQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <p>What we will be discussing over the new few weeks is the process of how to make requests from webpages for new data or
new files from a remote webserver.</p> <p>It is with JavaScript that we will be requesting the new content and then injecting it into your pages.</p> <h2 id="xmlhttprequest"><a href="#xmlhttprequest" class="header-anchor">#</a> XMLHttpRequest</h2> <p>The original way to make requests to a remote server to have files sent was an object called <code>XMLHttpRequest</code>.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'readystatechange'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//this function runs each time readystate changes</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//this function runs if an error happens when called xhr.send()</span>
  <span class="token comment">//xhr.readyState - 2: sent, 3: partial response, or 4: complete</span>
  <span class="token comment">//xhr.status - the http status code like 200, 404, 401, 500, etc</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//data is the data we are sending to the server - FormData or JSON string, etc</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>The limitations of the XMLHttpRequest object were mostly to do with security.</p> <p>Along with ES6, and the addition of <code>Promises</code> allowed for a reworking of the whole process with a new method called
<code>fetch</code>.</p> <div title="xmlhttprequest" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/mLL5pdIbqWc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <h2 id="fetch"><a href="#fetch" class="header-anchor">#</a> Fetch</h2> <p>The new method that replaces XMLHttpRequest. The good news here is that if you are already familiar with the syntax for
<code>Promises</code> then you already know most of the syntax for <code>fetch</code>.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string">'https://www.example.com/api/'</span><span class="token punctuation">;</span>
<span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//we have a response from the server</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//if we got a bad response then we can trigger the catch</span>
    <span class="token comment">//if the response was a JSON file then we can extract the contents with:</span>
    <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//extract the JSON String from the body of the response</span>
    <span class="token comment">//convert the JSON String into an object</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//data will be the Object that was extracted from the JSON String</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//this code runs if there was a network error preventing sending the request</span>
    <span class="token comment">//OR if the response gave a bad status code</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>When we send a request to a webserver it can be for ANY type of file - html, xml, json, css, js, png, jpg, avi, mpg,
mp3, or anything else. When you make the request you should be aware of what kind of file will be send back.</p> <p>In the example above we used <code>request.json()</code> to extract the JSON data from the response. If we were getting some other
kind of text file, like CSS, HTML, or XML then we should use <code>response.text()</code>. If we were getting a binary file like an
image or audio file then we would use <code>response.blob()</code> to get the binary data. <code>Blob</code> stands for <strong>Binary Large
OBject</strong>.</p> <p>Regardless of whether you are using <code>fetch</code> or <code>XMLHttpRequest</code> to get the file from the server we are working with the
same technology. We are making an <code>HTTP Request</code>, which contains <code>headers</code> and, potentially, a <code>body</code>. The request is
sent to a web server over the internet and then we get back an <code>HTTP Response</code>, which contains <code>headers</code> and has a
<code>body</code>.</p> <p>Think of making Request like mailing a letter to someone.</p> <ul><li>The headers are the things that get written on the outside of the envelope.</li> <li>The body is the contents inside the envelope.</li> <li>Once the letter is sealed and addressed you stick it in a mail box. The postal service will take your letter,
interpret what you wrote on the envelope and figure out how to get your letter to the correct address.</li> <li>The street address and city and province help you understand where you are sending your letter.</li> <li>The postal code is what the postal service actually uses to figure our how to route your letter.</li> <li>You don't need to understand how the letter gets to the other address.</li> <li>The envelope should have a return address on the outside of the envelope so that a response can be sent back to you.</li></ul> <div title="Fetch in 5 under minutes" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/FmpMIaukgfA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <h2 id="json"><a href="#json" class="header-anchor">#</a> JSON</h2> <p><code>JSON</code> - JavaScript Object Notation is the most popular format for sending data between clients and servers. It is
called JSON because it uses a JavaScript-compatible syntax for encoding the information inside the file.</p> <p><a href="https://www.json.org/json-en.html" target="_blank" rel="noopener noreferrer">Official JSON website<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>However, it is <strong>NOT</strong> JavaScript. It is just a text file with a single long string. For this exact reason, we cannot
save things like functions or DOM elements inside of JSON files. We can only save <code>String</code>, <code>Number</code>, <code>Boolean</code>, and
<code>null</code> (<code>Primitive</code> values) plus <code>Array</code> literals and <code>Object</code> literals.</p> <p>The <code>JSON</code> file format is used by <code>localStorage</code> and <code>sessionStorage</code> to hold data in the browser. More on this next
week.</p> <p>The primary differences between a JS object and a JSON object are:</p> <ul><li>All object keys must be wrapped in double quotes.</li> <li>All string values must be wrapped in double quotes.</li> <li>No trailing commas are allowed after array or object values.</li> <li>No comments are allowed in the file.</li> <li>No variable declarations.</li></ul> <p>Here is a JavaScript Object:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Joanne'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
  <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">courses</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'HRT100'</span><span class="token punctuation">,</span> <span class="token string">'HRT200'</span><span class="token punctuation">,</span> <span class="token string">'HRT300'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>and here is the same information as JSON:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Joanne&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
  <span class="token property">&quot;active&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;courses&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;HRT100&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;HRT200&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;HRT300&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Notice all the double quotes around all the string values. No quotes around the number or boolean values.</p> <div title="JSON vs JavaScript Object Literals" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/912_cPllMyg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <h2 id="xml"><a href="#xml" class="header-anchor">#</a> XML</h2> <p><code>XML</code> - eXtensible Markup Language, created in 1998, was the first file format that was used for client-side web
development for the transfer of data between clients and servers. As the name suggests, it is a MarkUp language. Angle
brackets <code>&lt; &gt;</code> are used to wrap the tag names which are used to label and describe the information in the file.</p> <p>The most important rule for writing <code>XML</code> files is <strong>Human Readable</strong>.</p> <p>This one rule meant that <code>XML</code> rapidly became a very popular format with the thousands of new developers who started
working in web development in the late 90s and early 2000s. The format was adopted by nearly all major software
providers and is still widely used today.</p> <p>An example of the widespread support for XML was the Microsoft adoption of it as a wrapper for all their MS Office files
in Office 2007. With this release file formats changed from <code>.doc</code> to <code>.docx</code> and <code>.xls</code> to <code>.xslx</code> and so on. The name
change reflected that XML had become a core part of the file format. A <code>.docx</code> file is really just a <code>.doc</code> file,
wrapped inside of an XML file and then zipped. All the new features for MS Word have been added via the XML portion of
the file.</p> <p><code>JSON</code> overtook XML as the most popular web development format during the last decade because it was <strong>Developer
Readable</strong> and because the file size was noticeably smaller than <code>XML</code>.</p> <p>Here is the same data as above, as an XML file.</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>?xml</span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">encoding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://com.algonquincollege/student<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>student</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Joanne<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>123<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>active</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>active</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>courses</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>course</span><span class="token punctuation">&gt;</span></span>HRT100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>course</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>course</span><span class="token punctuation">&gt;</span></span>HRT200<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>course</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>course</span><span class="token punctuation">&gt;</span></span>HRT300<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>course</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>courses</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>student</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>You can see how much more typing is required to output that small amount of information.</p> <div title="fetching and reading XML" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/MDAWie2Sicc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <h2 id="request-objects"><a href="#request-objects" class="header-anchor">#</a> Request Objects</h2> <p>When you make a <code>fetch</code> call, very often you are only providing a URL to the method. However, the <code>fetch</code> method will
actually create a <code>new Request()</code> object on your behalf, using all the default values plus your URL.</p> <p>If you need to you can create your own <code>Request</code> object.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//fetch also accepts a Request object instead of a URL object or URL string.</span>
<span class="token function">fetch</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">body</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>warn<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Inside the Request object you can define what the headers are and what the body is.</p> <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Request" target="_blank" rel="noopener noreferrer">MDN reference for Request Object<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. You can use this reference
to find all the properties and methods of a Request object.</p> <div title="fetch with request and header objects" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/YJ7ZgGnhN5k" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <h2 id="response-objects"><a href="#response-objects" class="header-anchor">#</a> Response Objects</h2> <p>Typically you will be working with a response object that gets returned to the first <code>then</code> method after a <code>fetch</code>.</p> <p>If you need to, like in a Service Worker when you want to send something to the browser that you are creating in
response to a request, you can create your own <code>Response</code> Object.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> response <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Response" target="_blank" rel="noopener noreferrer">MDN reference for a Response Object<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. You can use this
reference page to find all the properties and methods for a Response Object.</p> <h2 id="body-objects"><a href="#body-objects" class="header-anchor">#</a> Body Objects</h2> <p>The Body object is the container for any file or large block of data being transferred between a client and a server.
Both the <code>Response</code> and the <code>Request</code> objects have a <code>body</code> property that is used to access the Body object.</p> <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/body" target="_blank" rel="noopener noreferrer">MDN reference for the body property of the Response object<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>The <code>body</code> property can contain one of the following data types:</p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Blob" target="_blank" rel="noopener noreferrer">Blob<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - for binary files like images</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/BufferSource" target="_blank" rel="noopener noreferrer">BufferSource<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - like an array of data but binary</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData" target="_blank" rel="noopener noreferrer">FormData<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - generally used for the information from a form</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream" target="_blank" rel="noopener noreferrer">ReadableStream<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - large chunk of text or numerical
data</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams" target="_blank" rel="noopener noreferrer">URLSearchParams<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - Query String formatted string</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/USVString" target="_blank" rel="noopener noreferrer">USVString<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - an encoded string</li></ul> <h3 id="json-text-and-blob-methods"><a href="#json-text-and-blob-methods" class="header-anchor">#</a> json(), text(), and blob() Methods</h3> <p>When a <code>Response</code> comes back to the browser, to either your main script or a service worker, the most common datatypes
that we receive are:</p> <ul><li>a json file</li> <li>a text file (CSS, XML, or HTML)</li> <li>an image (Blob)</li></ul> <p>Because of that, there are three specific methods that we can use to extract the contents of those files, from the
<code>body</code> of the <code>Response</code>. We use the <code>Response.json()</code> method to convert the contents of the JSON file into a JavaScript
Object. We use the <code>Response.text()</code> method to read the contents of the CSS, XML, or HTML file into a string. We use the
<code>Response.blob()</code> method to extract the binary data from a binary file (like an image) into a <code>Blob</code> object.</p> <p>All three of the methods are asynchronous and return a <code>Promise</code>. So, we use them inside a <code>then()</code> method and return
the <code>Promise</code> that they create. That way it gets passed to the next <code>then()</code> in the chain. The next <code>then()</code> will
receive the Object, String, or Binary content from the method.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">fetch</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//only the first return actually runs</span>
    <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">blob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">body</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//body is the formatted contents returned from one of those methods</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>If we want to use the Blob as the source for an image element on our page then we need to use the
<code>URL.createObjectURL()</code> method.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'dynamicImage'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>It is worth noting that there is also a <code>formData()</code> method that will extract the text from the body as if it were a
FormData object. Also, you have an <code>arrayBuffer()</code> method available to use if you want the file contents as an
ArrayBuffer instead of a Blob.</p> <p>A Response object can only be used for one purpose - providing content to the webpage or saving it to the Cache API. If
you need multiple copies of a response object you can use the <code>clone()</code> method to create that copy.</p> <h2 id="header-objects"><a href="#header-objects" class="header-anchor">#</a> Header Objects</h2> <p>Inside your <code>HTTP Request</code> and <code>HTTP Response</code>, the <code>Head</code> holds the meta information about the request or response.
What address is it being sent from, what address it is being sent to, whether it is encrypted, what type of file is
contained in the body, the file size of the body, the encoding type, if it is compressed, cookies, what is the expiry
date of the response, and much more. All the values in the <code>Head</code> are called <code>Headers</code>.</p> <div title="parts of the url" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/3ytQJvqzKu8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <p>The <code>QueryString</code> is one of the <code>Headers</code>. It is a string that contains a series of name value pairs. There is an <code>=</code>
sign between each name and value. And there is an <code>&amp;</code> ampersand between each of the pairs. The values in the
<code>QueryString</code> need to be URL encoded to avoid causing issues with other programs, through special characters, who might
read the string.</p> <p>The official object for a <code>QueryString</code> is a
<a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams" target="_blank" rel="noopener noreferrer">URLSearchParams<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> object.</p> <div title="encoding and decoding URIs" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/tmgMWWNRTp0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <p>The <code>Method</code> verb (GET, POST, PUT, PATCH, DELETE, HEAD, OPTIONS) is one of the <code>Headers</code>. The <code>Method</code> is important on
the Server because it gives the server an idea of how to handle the request. You will learn more about this in MAD9124.</p> <p>The <code>Body</code> is the container for the file that is being uploaded or downloaded. The <code>Body</code> can be empty if there is no
file or data being uploaded or downloaded. With a <code>GET</code> <code>Request</code> the <code>Body</code> is always empty.</p> <p>The two places that you can put information to send with a <code>Request</code> or <code>Response</code> are in the <code>QueryString</code> or in the
<code>Body</code>. The <code>QueryString</code> is limited to about 2000 characters. The Body is limited in total size on most servers to
files that are roughly 20MB. This limit can be changed through server-side settings.</p> <p>The Header object is like an array of name value pairs. Many of the headers will be created by the browser and sent
automatically. These are values that you are not allowed to edit. Things like the ip address cannot be altered in your
script.</p> <p><a href="https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_header_name" target="_blank" rel="noopener noreferrer">List of restricted header names<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>In addition, you are not allowed to programmatically edit the <code>set-cookie</code> or <code>set-cookie2</code> headers in a <code>Response</code>
object.</p> <p>The Header object has an <code>append</code> method that we can use to add or edit header values.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> h <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Headers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
h<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">,</span> <span class="token string">'application/json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
h<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'content-length'</span><span class="token punctuation">,</span> <span class="token number">13234</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//file size in bytes</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>When we are uploading a file, it means that we are adding a file to the <code>Body</code> and we should include headers that
indicate the type and size of the attached file.</p> <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers" target="_blank" rel="noopener noreferrer">Here is a list of possible headers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Many of the existing headers can also be accessed through the <code>.headers</code> property on the <code>Request</code> and <code>Response</code>
objects and its <code>.get()</code> method.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  response<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  response<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'Content-Encoding'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  response<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'Age'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  response<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'Date'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  response<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'X-my-custom-header'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>The other methods on the Header object include <code>has()</code>, <code>entries()</code>, and <code>delete()</code>.
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Headers/get" target="_blank" rel="noopener noreferrer">Here is the link to the get method<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <blockquote><p>It is worth noting that not all headers are accessible through JavaScript. This is for security reasons. Some are not
able to be changed or deleted through script and some are not allow to be read.</p></blockquote> <div title="headers and why they matter" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/5gnz6NZ3TRA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <h2 id="url-and-location-objects"><a href="#url-and-location-objects" class="header-anchor">#</a> URL and Location Objects</h2> <p>URLs can be thought of as just strings but they do have clearly defined parts: the domain, the path, the hash, the
querystring(search), the protocol, and the port.</p> <p>JavaScript has a top level object <code>window.location</code> that contains all these parts. If you <code>console.log</code> the location
object you will see all the different components that make it up. One way that you could built a url is to take or
create a <code>Location</code> object and set the values for its different components and then use the full value of the <code>href</code>
property string.</p> <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Location" target="_blank" rel="noopener noreferrer">MDN reference for Location Object<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Another approach is to use the <code>URL</code> object to create one. It takes two parameters that make it work a lot more like a
typical development situation, where you have a base url and then an endpoint with or without a <code>QueryString</code>.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">BASEURL</span> <span class="token operator">=</span> <span class="token string">'http://somedomain.com'</span><span class="token punctuation">;</span>
<span class="token comment">//a global variable that holds the base url for your API</span>

<span class="token keyword">let</span> endpoint <span class="token operator">=</span> <span class="token string">'/api/people/23?api-key=8768374823'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>endpoint<span class="token punctuation">,</span> <span class="token constant">BASEURL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//first we have a url object to pass to a Request or fetch call.</span>

<span class="token keyword">let</span> str <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//here we have a String built from the url object</span>

<span class="token keyword">let</span> req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// OR</span>
req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//here we have a Request object with the url inside it</span>

<span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resp</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//we can pass a url directly to fetch</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fetch with url'</span><span class="token punctuation">,</span> resp<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fetch</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resp</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//we can pass the request object that was given a url or string</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fetch with url in request'</span><span class="token punctuation">,</span> resp<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fetch</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resp</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//we can pass the string to the fetch</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fetch with url as string'</span><span class="token punctuation">,</span> resp<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><div title="parts of the url" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/3ytQJvqzKu8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <p>The URL property of a <code>Request</code> or <code>Location</code> object, just like the <code>URL</code> object itself has a bunch of properties that
you can access to directly read the different parts of a URL. (Otherwise you would have to parse the string yourself.)</p> <ul><li><code>hash</code> is the part that begins with <code>#</code>.</li> <li><code>host</code> is a hostname with a port (if specified).</li> <li><code>hostname</code> is the host without the port.</li> <li><code>href</code> is the entire url string with all the parts.</li> <li><code>origin</code> includes the scheme, domain, and port.</li> <li><code>pathname</code> is the path and filename starting with <code>/</code>.</li> <li><code>port</code> is the port number part of the url. Eg: 80 or 5500.</li> <li><code>protocol</code> is the scheme, like <code>http:</code>, <code>ftp:</code>, <code>https:</code>, <code>blob:</code>, or <code>file:</code>.</li> <li><code>search</code> is the querystring for the url and is either an empty string or includes the <code>?</code> at the start.</li> <li><code>searchParams</code> is a read-only <code>SearchParams</code> object with the elements in the querystring.</li></ul> <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/URL" target="_blank" rel="noopener noreferrer">MDN reference for URL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="formdata-objects"><a href="#formdata-objects" class="header-anchor">#</a> FormData Objects</h2> <p>The <code>FormData</code> object is a great way to bundle an entire HTML form, including any hidden input elements, into a format
that can be set as the value for a <code>Request</code> <code>body</code>.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> myform <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myform'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//a form element on the page</span>
<span class="token keyword">let</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span>myform<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//this will append all the name value pairs for the elements in the form.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>2 lines of code and your entire form is bundled and ready to be uploaded.</p> <div class="custom-block danger"><p class="custom-block-title">Important</p> <p>You must give each of your form input, select, and textarea elements a <code>name</code> attribute. Without the <code>name</code> attribute it
will not get added to the FormData object.</p> <p>You should always do validation on the data and not blindly upload it.</p></div> <p>Now, you can also use the <code>FormData</code> object to bundle data that is not part of a form, or a mix of form data and other
variables.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'email'</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'email'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>This <code>FormData</code> object with the two name-value pairs can now be passed to the <code>body</code> property of a <code>Request</code> or options
object for a <code>fetch</code> call.</p> <div title="What is a FormData Object" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/9mhyo1wQGeI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <div title="Effective use of FormData" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/GWJhE7Licjs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <div title="Uploading data with FormData" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/JtKIcqZdLLM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <h2 id="urlsearchparams"><a href="#urlsearchparams" class="header-anchor">#</a> URLSearchParams</h2> <p>The <code>URLSearchParams</code> object is the object that can be used to hold or build a QueryString. It can also be used as an
alternative to <code>FormData</code> when bundling data to upload to the server. It can be used as part of the URL, in the headers,
or in the <code>body</code>.</p> <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams" target="_blank" rel="noopener noreferrer">MDN reference for URLSearchParams<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>It is named as <code>URLSearchParams</code> because it represents the value held in the <code>search</code> property of the <code>Location</code> object,
which is the top-level object that holds all the information about the webpage's url, hash, protocol, port, domain,
path, etc.</p> <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Location" target="_blank" rel="noopener noreferrer">MDN Location reference<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>It works much the same way as a <code>Headers</code> or <code>FormData</code> object do.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> search <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
search<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">,</span> <span class="token string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
search<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'Karim'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
search<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
search<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Karim</span>
search<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//sorts the existing values by their key</span>
search<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
search<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
search<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//gives you the full string (without a `?`)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>There is also an <code>append</code> method that works like <code>set</code> but will allow for duplicate entries with the same key.</p> <p>It is an iterable object, which means it can be used in a <code>for...of</code> loop.</p> <p>When you want to add a <code>URLSearchParams</code> string to the URL or to the body, use the <code>toString</code> method. Remember to add
the <code>?</code> in front of it if you are using it as part of the URL.</p> <div title="URL and URLSearchParams" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/b867xRQkjVA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <h2 id="usvstring"><a href="#usvstring" class="header-anchor">#</a> USVString</h2> <p>A <code>USVString</code> is a Unicode Scalar Value String. Basically it is a string designed for efficient text processing. It uses
UTF-16 instead of UTF-8 for the holding of string values. This means that code-points that need 16-bit values to be
represented can be saved as a single character. Chinese characters and Emojis both fall into this category. JavaScript
will internally handle the conversion between UTF-8 strings and UTF-16 strings when you use the <code>USVString</code>.</p> <p>When you see that a <code>USVString</code> is being used for an API, you can just think of it as a string that is encoded to work
well in fetch calls and URLs.</p> <h2 id="fetch-all-together"><a href="#fetch-all-together" class="header-anchor">#</a> Fetch All Together</h2> <p>Now that you know all the parts of an <code>HTTP Request</code>, you can build your own <code>Request</code> object and pass it to a <code>fetch</code>
call.</p> <p>The following example shows how to combine all the different parts into a Request object that gets passed to the <code>fetch</code>
method. Only one value is being appended or added to the <code>Headers</code>, <code>FormData</code>, or <code>URLSearchParms</code> object for brevity's
sake.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> head <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Headers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//`append` what you need</span>
head<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'x-custom-header'</span><span class="token punctuation">,</span> <span class="token string">'Memento'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//`append` what you need</span>
fd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> search <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//`set` what you need</span>
search<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'api-key'</span><span class="token punctuation">,</span> <span class="token string">'some-value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> baseURL <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://www.example.com</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> relativePath <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./api/endpoint</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>relativePath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>search<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> baseURL<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// or new URL(path+querystring, baseurl).toString();</span>
<span class="token comment">//call the toString method to create the DOMString to pass to the Request object</span>

<span class="token keyword">let</span> req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">headers</span><span class="token operator">:</span> head<span class="token punctuation">,</span>
  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'cors'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">body</span><span class="token operator">:</span> fd<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fetch</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//response to the fetch</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><div title="Cancel | Abort a fetch call" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/3yTs1NJZyBk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <h2 id="what-to-do-this-week"><a href="#what-to-do-this-week" class="header-anchor">#</a> What to do this week</h2> <div class="custom-block warning"><p class="custom-block-title">TODO Things to do before next week.</p> <ul><li>Read all the content from <code>Modules 9.1, 9.2, and 10.1</code>.</li> <li>Continue working on the Hybrid Exercises</li></ul></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/7/2022, 12:53:03 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/F2022/modules/week9/async/" class="prev">
        9.2: Asynchronous Programming
      </a></span> <span class="next"><a href="/F2022/modules/week10/fetch-apis/">
        10.2: Fetch and APIs
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/F2022/assets/js/app.42156b92.js" defer></script><script src="/F2022/assets/js/2.309c8f6c.js" defer></script><script src="/F2022/assets/js/23.cbd124fb.js" defer></script><script src="/F2022/assets/js/4.8f0492b2.js" defer></script><script src="/F2022/assets/js/6.42129677.js" defer></script>
  </body>
</html>
